(this["webpackJsonpprescription-verification"]=this["webpackJsonpprescription-verification"]||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(33),c=n.n(a),r=n(15),s=n(23),o=n.n(s),j=n(34),l=n(10),d=n(14),b=n(5),p=n(39),u=n(50),O=n(191),m=n(189),x=n(190),h=n(194),g=n(193),f=n(195),v=n(196),y=n(197),P=n(198),N=n(199),C=n(1),w=function(e){var t=e.prescriptionList,n=e.setPrescriptionList,a=e.print,c=(e.validity,function e(t,n,i,a){Object(u.a)(this,e),this.id=t,this.medicineName=n,this.dose=i,this.timeOfConsumption=a,this.isVisible=!0}),r=Object(i.useState)({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0}),s=Object(l.a)(r,2),o=s[0],j=s[1],w=Object(i.useState)(-1),T=Object(l.a)(w,2),S=T[0],k=T[1],E=function(e){j(Object(p.a)(Object(p.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(C.jsxs)(O.a,{container:!0,children:[!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Medicine Name",name:"medicineName",value:o.medicineName,onChange:E})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Dose",name:"dose",value:o.dose,onChange:E})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Time of Consumption",name:"timeOfConsumption",value:o.timeOfConsumption,onChange:E})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){if(-1!==S)t[S].medicineName=o.medicineName,t[S].dose=o.dose,t[S].timeOfConsumption=o.timeOfConsumption,k(-1);else{var e=new c;e.medicineName=o.medicineName,e.dose=o.dose,e.timeOfConsumption=o.timeOfConsumption,e.id=t.length,e.isVisible=!0,n([].concat(Object(d.a)(t),[e])),document.getElementsByName("medicineName")[0].focus()}j({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0})},children:-1===S?"Add":"Save"})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:Object(C.jsx)(O.a,{item:!0,xs:10,align:"center",children:Object(C.jsx)(h.a,{component:g.a,children:Object(C.jsxs)(f.a,{children:[Object(C.jsx)(v.a,{children:Object(C.jsxs)(y.a,{children:[Object(C.jsx)(P.a,{align:"center",children:"Sr. No."}),Object(C.jsx)(P.a,{align:"center",children:"Medicine Name"}),Object(C.jsx)(P.a,{align:"center",children:"Dose"}),Object(C.jsx)(P.a,{align:"center",children:"Time of Consumption"}),!a&&Object(C.jsx)(P.a,{align:"center",children:"Edit"})]})}),Object(C.jsx)(N.a,{children:t.map((function(e){return Object(C.jsxs)(y.a,{children:[Object(C.jsx)(P.a,{align:"center",children:e.id+1}),Object(C.jsx)(P.a,{align:"center",children:e.medicineName}),Object(C.jsx)(P.a,{align:"center",children:e.dose}),Object(C.jsx)(P.a,{align:"center",children:e.timeOfConsumption}),!a&&Object(C.jsx)(P.a,{align:"center",children:Object(C.jsx)(x.a,{onClick:function(){return function(e){var n=t[e];j(n),k(e)}(e.id)},children:"Edit"})})]},e.id)}))})]})})})})]})},T=function(e){var t=e.date,n=e.patientName,i=e.setPatientName,a=e.validity,c=e.setValidity;return Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:12,style:{paddingLeft:"15%",paddingTop:"2%"},children:Object(C.jsxs)("p",{children:["Date: ",t.getDate()," ",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ",t.getFullYear()]})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,style:{marginTop:"30px",paddingLeft:"15%"},children:Object(C.jsx)(m.a,{name:"patientName",label:"Patient Name",value:n,onChange:function(e){return i(e.target.value)}})}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,style:{marginTop:"45px"},children:["Valid upto:",Object(C.jsx)("input",{type:"date",style:{marginLeft:"10px"},value:a,onChange:function(e){return c(e.target.value)}})]})]})},S=function(e){var t=e.prescriberEmail,n=e.setPrescriberEmail,a=e.prescriberPassword,c=e.setPrescriberPassword,r=e.OTP,s=e.setOTP,o=e.getOTP,j=e.checkOTP,d=e.OTPVerified,b=e.printPrescription,p=Object(i.useState)(!1),u=Object(l.a)(p,2),h=u[0],g=u[1];return Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{name:"email",label:"Prescriber Email",type:"email",value:t,onChange:function(e){return n(e.target.value)}})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{name:"password",label:"Prescriber Password",type:"password",value:a,onChange:function(e){return c(e.target.value)}})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{onClick:function(){o(),g(!0)},children:"Get OTP"})}),h&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(C.jsx)(m.a,{name:"otp",label:"OTP",value:r,onChange:function(e){return s(e.target.value)}})}),h&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(C.jsx)(x.a,{onClick:j,children:"Check"})}),d&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{onClick:b,children:"Print"})})]})},k=n(30),E=n.n(k),L="http://".concat("192.168.0.103",":5000"),V=function(e){return E.a.post("".concat(L,"/signup"),e)},D=function(e,t,n,i,a){return E.a.post("".concat(L,"/saveprescription"),{date:e,patientName:t,prescriberEmail:n,prescriptionList:i,validity:a})},B=function(e){return E.a.post("".concat(L,"/verifyprescription"),{id:e})},J=function(){var e=Object(r.f)(),t=Object(i.useState)(new Date),n=Object(l.a)(t,1)[0],a=Object(i.useState)(""),c=Object(l.a)(a,2),s=c[0],d=c[1],b=Object(i.useState)([]),p=Object(l.a)(b,2),u=p[0],O=p[1],m=Object(i.useState)(""),x=Object(l.a)(m,2),h=x[0],g=x[1],f=Object(i.useState)(""),v=Object(l.a)(f,2),y=v[0],P=v[1],N=Object(i.useState)(""),k=Object(l.a)(N,2),V=k[0],B=k[1],J=Object(i.useState)(""),M=Object(l.a)(J,2),A=M[0],I=M[1],F=Object(i.useState)(""),q=Object(l.a)(F,2),U=q[0],G=q[1],R=Object(i.useState)(!1),Y=Object(l.a)(R,2),z=Y[0],H=Y[1],K=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=h,n=V,E.a.post("".concat(L,"/getotp"),{email:t,password:n})).then((function(e){200===e.status?(alert("OTP sent to registered email"),P(e.data.prescriberName)):alert("Some error occurred")})).catch((function(e){console.log(e.response.status)}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=h,n=U,E.a.post("".concat(L,"/verifyotp"),{email:t,otp:n})).then((function(e){200===e.status&&(H(!0),alert("OTP Verified!"))})).catch((function(e){409===e.response.status&&alert("Invalid OTP, try again")}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var t=Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(n,s,h,u,A).then((function(t){console.log(t),e.push("/print",{patientName:s,prescriptionList:u,prescriberName:y,date:n.toString(),id:t.data.id})})).catch((function(e){console.log(e.response)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(T,{date:n,patientName:s,setPatientName:d,validity:A,setValidity:I}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(w,{prescriptionList:u,setPrescriptionList:O}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(S,{prescriberEmail:h,setPrescriberEmail:g,prescriberPassword:V,setPrescriberPassword:B,OTP:U,setOTP:G,getOTP:K,checkOTP:Q,OTPVerified:z,printPrescription:W})]})},M={marginTop:"15px",width:"250px"},A={marginTop:"15px"},I=function(){var e=Object(i.useState)({name:"",email:"",password:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e.target.name,e.target.value)))},r=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,V(n).then((function(e){200===e.status&&alert("Account created, navigate to /prescription")})).catch((function(e){return console.log(e.response)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{margin:"20px 0px"},children:Object(C.jsx)("p",{children:"Sign Up"})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"name",label:"Name",style:M,value:n.name,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"email",label:"Email",style:M,value:n.email,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"password",value:n.password,label:"Password",type:"password",style:M,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{variant:"contained",style:A,onClick:r,children:"Sign Up"})})]})},F=n(89),q=n.n(F),U=(n(153),function(){var e=Object(r.f)();return Object(i.useEffect)((function(){q.a.toCanvas(document.getElementById("qrcode"),"http://192.168.0.180:3000/verify/".concat(e.location.state.id),(function(e){e&&console.log(e)}))}),[e.location.state.id]),Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,align:"left",style:{paddingLeft:"10%",paddingTop:"50px"},children:["Date: ",e.location.state.date,Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"Patient Name: ",e.location.state.patientName,Object(C.jsx)("br",{}),"Prescriber Name: ",e.location.state.prescriberName]}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,align:"right",style:{paddingRight:"5%",paddingTop:"50px"},children:Object(C.jsx)("canvas",{id:"qrcode"})}),Object(C.jsx)(O.a,{item:!0,xs:12}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(w,{prescriptionList:e.location.state.prescriptionList,print:!0})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",className:"printBtn",children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){return window.print()},children:"Print"})})]})}),G=function(){var e="valid",t=Object(i.useState)("checking"),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)([]),d=Object(l.a)(s,2),b=d[0],p=d[1],u=Object(i.useState)(""),m=Object(l.a)(u,2),x=m[0],h=m[1],g=Object(r.g)().id;return Object(i.useEffect)((function(){var t=function(){var t=Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(g).then((function(t){200===t.status&&(p(t.data.prescriptionList),c(e),h(t.data.validity))})).catch((function(e){console.log(e.response)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[g]),Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsxs)(O.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:["invalid"===a&&Object(C.jsx)("h3",{children:"Invalid prescription"}),a===e&&Object(C.jsx)("h3",{children:"Prescription Verified"})]}),Object(C.jsxs)(O.a,{item:!0,xs:12,align:"center",children:["Valid upto: ",x]}),a===e&&Object(C.jsx)(w,{prescriptionList:b,print:!0})]})},R=(n(154),function(){return Object(C.jsxs)(r.c,{children:[Object(C.jsx)(r.a,{path:"/prescriber",children:Object(C.jsx)(I,{})}),Object(C.jsx)(r.a,{path:"/prescription",children:Object(C.jsx)(J,{})}),Object(C.jsx)(r.a,{path:"/print",children:Object(C.jsx)(U,{})}),Object(C.jsx)(r.a,{path:"/verify/:id",children:Object(C.jsx)(G,{})}),Object(C.jsxs)(r.a,{path:"/",children:[Object(C.jsx)("h3",{children:"Navigate to /prescriber to create an account"}),Object(C.jsx)("h3",{children:"Navigate to /prescription to create prescription"})]})]})}),Y=n(43);c.a.render(Object(C.jsx)(Y.a,{children:Object(C.jsx)(R,{})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.3c0deb07.chunk.js.map