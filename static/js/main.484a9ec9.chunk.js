(this["webpackJsonpprescription-verification"]=this["webpackJsonpprescription-verification"]||[]).push([[0],{133:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(33),c=n.n(a),r=n(16),s=n(23),o=n.n(s),j=n(34),l=n(10),d=n(14),b=n(5),p=n(39),u=n(50),O=n(191),m=n(189),x=n(190),h=n(194),g=n(193),f=n(195),v=n(196),y=n(197),P=n(198),N=n(199),C=n(1),w=function(e){var t=e.prescriptionList,n=e.setPrescriptionList,a=e.print,c=(e.validity,function e(t,n,i,a){Object(u.a)(this,e),this.id=t,this.medicineName=n,this.dose=i,this.timeOfConsumption=a,this.isVisible=!0}),r=Object(i.useState)({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0}),s=Object(l.a)(r,2),o=s[0],j=s[1],w=Object(i.useState)(-1),T=Object(l.a)(w,2),S=T[0],k=T[1],L=function(e){j(Object(p.a)(Object(p.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(C.jsxs)(O.a,{container:!0,children:[!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Medicine Name",name:"medicineName",value:o.medicineName,onChange:L})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Dose",name:"dose",value:o.dose,onChange:L})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(m.a,{label:"Time of Consumption",name:"timeOfConsumption",value:o.timeOfConsumption,onChange:L})}),!a&&Object(C.jsx)(O.a,{item:!0,xs:12,md:3,align:"center",children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){if(-1!==S)t[S].medicineName=o.medicineName,t[S].dose=o.dose,t[S].timeOfConsumption=o.timeOfConsumption,k(-1);else{var e=new c;e.medicineName=o.medicineName,e.dose=o.dose,e.timeOfConsumption=o.timeOfConsumption,e.id=t.length,e.isVisible=!0,n([].concat(Object(d.a)(t),[e])),document.getElementsByName("medicineName")[0].focus()}j({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0})},children:-1===S?"Add":"Save"})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:Object(C.jsx)(O.a,{item:!0,xs:10,align:"center",children:Object(C.jsx)(h.a,{component:g.a,children:Object(C.jsxs)(f.a,{children:[Object(C.jsx)(v.a,{children:Object(C.jsxs)(y.a,{children:[Object(C.jsx)(P.a,{align:"center",children:"Sr. No."}),Object(C.jsx)(P.a,{align:"center",children:"Medicine Name"}),Object(C.jsx)(P.a,{align:"center",children:"Dose"}),Object(C.jsx)(P.a,{align:"center",children:"Time of Consumption"}),!a&&Object(C.jsx)(P.a,{align:"center",children:"Edit"})]})}),Object(C.jsx)(N.a,{children:t.map((function(e){return Object(C.jsxs)(y.a,{children:[Object(C.jsx)(P.a,{align:"center",children:e.id+1}),Object(C.jsx)(P.a,{align:"center",children:e.medicineName}),Object(C.jsx)(P.a,{align:"center",children:e.dose}),Object(C.jsx)(P.a,{align:"center",children:e.timeOfConsumption}),!a&&Object(C.jsx)(P.a,{align:"center",children:Object(C.jsx)(x.a,{onClick:function(){return function(e){var n=t[e];j(n),k(e)}(e.id)},children:"Edit"})})]},e.id)}))})]})})})})]})},T=function(e){var t=e.date,n=e.patientName,i=e.setPatientName,a=e.validity,c=e.setValidity;return Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:12,style:{paddingLeft:"15%",paddingTop:"2%"},children:Object(C.jsxs)("p",{children:["Date: ",t.getDate()," ",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ",t.getFullYear()]})}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,style:{marginTop:"30px",paddingLeft:"15%"},children:Object(C.jsx)(m.a,{name:"patientName",label:"Patient Name",value:n,onChange:function(e){return i(e.target.value)}})}),Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,style:{marginTop:"45px"},children:["Valid upto:",Object(C.jsx)("input",{type:"date",style:{marginLeft:"10px"},value:a,onChange:function(e){return c(e.target.value)}})]})]})},S=function(e){var t=e.prescriberEmail,n=e.setPrescriberEmail,a=e.prescriberPassword,c=e.setPrescriberPassword,r=e.OTP,s=e.setOTP,o=e.getOTP,j=e.checkOTP,d=e.OTPVerified,b=e.printPrescription,p=Object(i.useState)(!1),u=Object(l.a)(p,2),h=u[0],g=u[1];return Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{name:"email",label:"Prescriber Email",type:"email",value:t,onChange:function(e){return n(e.target.value)}})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{name:"password",label:"Prescriber Password",type:"password",value:a,onChange:function(e){return c(e.target.value)}})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{onClick:function(){o(),g(!0)},children:"Get OTP"})}),h&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(C.jsx)(m.a,{name:"otp",label:"OTP",value:r,onChange:function(e){return s(e.target.value)}})}),h&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(C.jsx)(x.a,{onClick:j,children:"Check"})}),d&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{onClick:b,children:"Print"})})]})},k=n(88),L=n.n(k),E=(n(133),function(e){var t=e.id,n=e.date,a=e.patientName,c=e.prescriberName,r=e.prescriptionList;return Object(i.useEffect)((function(){L.a.toCanvas(document.getElementById("qrcode"),"https://shrutikmali.github.io/prescription-verification/verify/".concat(t),(function(e){e&&console.log(e)}))}),[t]),Object(C.jsxs)(O.a,{container:!0,spacing:2,children:[Object(C.jsxs)(O.a,{item:!0,xs:12,md:6,align:"left",style:{paddingLeft:"10%",paddingTop:"50px"},children:["Date: ",n.toString(),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),"Patient Name: ",a,Object(C.jsx)("br",{}),"Prescriber Name: ",c]}),Object(C.jsx)(O.a,{item:!0,xs:12,md:6,align:"right",style:{paddingRight:"5%",paddingTop:"50px"},children:Object(C.jsx)("canvas",{id:"qrcode"})}),Object(C.jsx)(O.a,{item:!0,xs:12}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(w,{prescriptionList:r,print:!0})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",className:"printBtn",children:Object(C.jsx)(x.a,{variant:"contained",onClick:function(){return window.print()},children:"Print"})})]})}),V=n(30),D=n.n(V),B="https://obscure-bastion-83307.herokuapp.com",J=function(e){return D.a.post("".concat(B,"/signup"),e)},M=function(e,t,n,i,a){return D.a.post("".concat(B,"/saveprescription"),{date:e,patientName:t,prescriberEmail:n,prescriptionList:i,validity:a})},A=function(e){return D.a.post("".concat(B,"/verifyprescription"),{id:e})},I=function(){var e=Object(i.useState)(new Date),t=Object(l.a)(e,1)[0],n=Object(i.useState)(""),a=Object(l.a)(n,2),c=a[0],r=a[1],s=Object(i.useState)([]),d=Object(l.a)(s,2),b=d[0],p=d[1],u=Object(i.useState)(""),O=Object(l.a)(u,2),m=O[0],x=O[1],h=Object(i.useState)(""),g=Object(l.a)(h,2),f=g[0],v=g[1],y=Object(i.useState)(""),P=Object(l.a)(y,2),N=P[0],k=P[1],L=Object(i.useState)(""),V=Object(l.a)(L,2),J=V[0],A=V[1],I=Object(i.useState)(""),F=Object(l.a)(I,2),q=F[0],U=F[1],G=Object(i.useState)(!1),R=Object(l.a)(G,2),Y=R[0],z=R[1],H=Object(i.useState)(""),K=Object(l.a)(H,2),Q=K[0],W=K[1],X=Object(i.useState)(!1),Z=Object(l.a)(X,2),$=Z[0],_=Z[1],ee=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=m,n=N,D.a.post("".concat(B,"/getotp"),{email:t,password:n})).then((function(e){200===e.status?(alert("OTP sent to registered email"),v(e.data.prescriberName)):alert("Some error occurred")})).catch((function(e){console.log(e.response.status)}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=m,n=q,D.a.post("".concat(B,"/verifyotp"),{email:t,otp:n})).then((function(e){200===e.status&&(z(!0),v(e.data.name),alert("OTP Verified!"))})).catch((function(e){409===e.response.status&&alert("Invalid OTP, try again")}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t,c,m,b,J).then((function(e){console.log(e),W(e.data.id),_(!0)})).catch((function(e){console.log(e.response)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[!$&&Object(C.jsxs)("div",{children:[Object(C.jsx)(T,{date:t,patientName:c,setPatientName:r,validity:J,setValidity:A}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(w,{prescriptionList:b,setPrescriptionList:p}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)(S,{prescriberEmail:m,setPrescriberEmail:x,prescriberPassword:N,setPrescriberPassword:k,OTP:q,setOTP:U,getOTP:ee,checkOTP:te,OTPVerified:Y,printPrescription:ne})]}),$&&Object(C.jsx)(E,{id:Q,date:t,patientName:c,prescriberName:f,prescriptionList:b})]})},F={marginTop:"15px",width:"250px"},q={marginTop:"15px"},U=function(){var e=Object(i.useState)({name:"",email:"",password:""}),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(p.a)(Object(p.a)({},n),{},Object(b.a)({},e.target.name,e.target.value)))},r=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,J(n).then((function(e){200===e.status&&alert("Account created, navigate to /prescription")})).catch((function(e){return console.log(e.response)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(O.a,{container:!0,children:[Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{margin:"20px 0px"},children:Object(C.jsx)("p",{children:"Sign Up"})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"name",label:"Name",style:F,value:n.name,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"email",label:"Email",style:F,value:n.email,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(m.a,{variant:"filled",name:"password",value:n.password,label:"Password",type:"password",style:F,onChange:c})}),Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",children:Object(C.jsx)(x.a,{variant:"contained",style:q,onClick:r,children:"Sign Up"})})]})},G=function(){var e="valid",t=Object(i.useState)("checking"),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)({patientName:"",prescriptionList:[],date:"",validity:""}),d=Object(l.a)(s,2),b=d[0],p=d[1],u=Object(r.f)().id;return Object(i.useEffect)((function(){var t=function(){var t=Object(j.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(u).then((function(t){200===t.status&&(p(t.data),c(e))})).catch((function(e){console.log(e.response)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[u]),Object(C.jsxs)(O.a,{container:!0,spacing:2,children:["invalid"===a&&Object(C.jsx)(O.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:Object(C.jsx)("h3",{children:"Invalid prescription"})}),a===e&&Object(C.jsxs)(O.a,{item:!0,contains:!0,xs:12,align:"center",children:[Object(C.jsx)(O.a,{item:!0,xs:12,children:Object(C.jsx)("h3",{children:"Prescription Verified"})}),Object(C.jsxs)(O.a,{item:!0,xs:12,align:"center",children:["Patient Name ",b.patientName]}),Object(C.jsxs)(O.a,{item:!0,xs:12,align:"center",children:["Prescribed on: ",b.date]}),Object(C.jsxs)(O.a,{item:!0,xs:12,align:"center",children:["Valid upto: ",b.validity]})]}),a===e&&Object(C.jsx)(w,{prescriptionList:b.prescriptionList,print:!0})]})},R=(n(154),function(){return Object(C.jsxs)(r.c,{children:[Object(C.jsx)(r.a,{path:"/prescriber",children:Object(C.jsx)(U,{})}),Object(C.jsx)(r.a,{path:"/prescription",children:Object(C.jsx)(I,{})}),Object(C.jsx)(r.a,{path:"/print/:id",children:Object(C.jsx)(E,{})}),Object(C.jsx)(r.a,{path:"/verify/:id",children:Object(C.jsx)(G,{})}),Object(C.jsxs)(r.a,{path:"/",children:[Object(C.jsx)("h3",{children:"Navigate to /prescriber to create an account"}),Object(C.jsx)("h3",{children:"Navigate to /prescription to create prescription"})]})]})}),Y=n(48);c.a.render(Object(C.jsx)(Y.a,{children:Object(C.jsx)(R,{})}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.484a9ec9.chunk.js.map