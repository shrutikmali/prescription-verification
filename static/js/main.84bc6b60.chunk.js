(this["webpackJsonpprescription-verification"]=this["webpackJsonpprescription-verification"]||[]).push([[0],{153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(33),c=n.n(a),r=n(48),s=n(15),o=n(23),j=n.n(o),l=n(34),d=n(10),b=n(14),p=n(5),u=n(39),O=n(50),m=n(191),x=n(189),h=n(190),g=n(194),f=n(193),v=n(195),y=n(196),P=n(197),N=n(198),C=n(199),w=n(1),T=function(e){var t=e.prescriptionList,n=e.setPrescriptionList,a=e.print,c=(e.validity,function e(t,n,i,a){Object(O.a)(this,e),this.id=t,this.medicineName=n,this.dose=i,this.timeOfConsumption=a,this.isVisible=!0}),r=Object(i.useState)({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0}),s=Object(d.a)(r,2),o=s[0],j=s[1],l=Object(i.useState)(-1),T=Object(d.a)(l,2),S=T[0],k=T[1],E=function(e){j(Object(u.a)(Object(u.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(w.jsxs)(m.a,{container:!0,children:[!a&&Object(w.jsx)(m.a,{item:!0,xs:12,md:3,align:"center",children:Object(w.jsx)(x.a,{label:"Medicine Name",name:"medicineName",value:o.medicineName,onChange:E})}),!a&&Object(w.jsx)(m.a,{item:!0,xs:12,md:3,align:"center",children:Object(w.jsx)(x.a,{label:"Dose",name:"dose",value:o.dose,onChange:E})}),!a&&Object(w.jsx)(m.a,{item:!0,xs:12,md:3,align:"center",children:Object(w.jsx)(x.a,{label:"Time of Consumption",name:"timeOfConsumption",value:o.timeOfConsumption,onChange:E})}),!a&&Object(w.jsx)(m.a,{item:!0,xs:12,md:3,align:"center",children:Object(w.jsx)(h.a,{variant:"contained",onClick:function(){if(-1!==S)t[S].medicineName=o.medicineName,t[S].dose=o.dose,t[S].timeOfConsumption=o.timeOfConsumption,k(-1);else{var e=new c;e.medicineName=o.medicineName,e.dose=o.dose,e.timeOfConsumption=o.timeOfConsumption,e.id=t.length,e.isVisible=!0,n([].concat(Object(b.a)(t),[e])),document.getElementsByName("medicineName")[0].focus()}j({medicineName:"",dose:"",timeOfConsumption:"",isVisible:!0})},children:-1===S?"Add":"Save"})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:Object(w.jsx)(m.a,{item:!0,xs:10,align:"center",children:Object(w.jsx)(g.a,{component:f.a,children:Object(w.jsxs)(v.a,{children:[Object(w.jsx)(y.a,{children:Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{align:"center",children:"Sr. No."}),Object(w.jsx)(N.a,{align:"center",children:"Medicine Name"}),Object(w.jsx)(N.a,{align:"center",children:"Dose"}),Object(w.jsx)(N.a,{align:"center",children:"Time of Consumption"}),!a&&Object(w.jsx)(N.a,{align:"center",children:"Edit"})]})}),Object(w.jsx)(C.a,{children:t.map((function(e){return Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{align:"center",children:e.id+1}),Object(w.jsx)(N.a,{align:"center",children:e.medicineName}),Object(w.jsx)(N.a,{align:"center",children:e.dose}),Object(w.jsx)(N.a,{align:"center",children:e.timeOfConsumption}),!a&&Object(w.jsx)(N.a,{align:"center",children:Object(w.jsx)(h.a,{onClick:function(){return function(e){var n=t[e];j(n),k(e)}(e.id)},children:"Edit"})})]},e.id)}))})]})})})})]})},S=function(e){var t=e.date,n=e.patientName,i=e.setPatientName,a=e.validity,c=e.setValidity;return Object(w.jsxs)(m.a,{container:!0,children:[Object(w.jsx)(m.a,{item:!0,xs:12,style:{paddingLeft:"15%",paddingTop:"2%"},children:Object(w.jsxs)("p",{children:["Date: ",t.getDate()," ",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ",t.getFullYear()]})}),Object(w.jsx)(m.a,{item:!0,xs:12,md:6,style:{marginTop:"30px",paddingLeft:"15%"},children:Object(w.jsx)(x.a,{name:"patientName",label:"Patient Name",value:n,onChange:function(e){return i(e.target.value)}})}),Object(w.jsxs)(m.a,{item:!0,xs:12,md:6,style:{marginTop:"45px"},children:["Valid upto:",Object(w.jsx)("input",{type:"date",style:{marginLeft:"10px"},value:a,onChange:function(e){return c(e.target.value)}})]})]})},k=function(e){var t=e.prescriberEmail,n=e.setPrescriberEmail,a=e.prescriberPassword,c=e.setPrescriberPassword,r=e.OTP,s=e.setOTP,o=e.getOTP,j=e.checkOTP,l=e.OTPVerified,b=e.printPrescription,p=Object(i.useState)(!1),u=Object(d.a)(p,2),O=u[0],g=u[1];return Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(x.a,{name:"email",label:"Prescriber Email",type:"email",value:t,onChange:function(e){return n(e.target.value)}})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(x.a,{name:"password",label:"Prescriber Password",type:"password",value:a,onChange:function(e){return c(e.target.value)}})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(h.a,{onClick:function(){o(),g(!0)},children:"Get OTP"})}),O&&Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(w.jsx)(x.a,{name:"otp",label:"OTP",value:r,onChange:function(e){return s(e.target.value)}})}),O&&Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",style:{marginBottom:"10px"},children:Object(w.jsx)(h.a,{onClick:j,children:"Check"})}),l&&Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(h.a,{onClick:b,children:"Print"})})]})},E=n(30),L=n.n(E),V="http://".concat("192.168.0.103",":5000"),D=function(e){return L.a.post("".concat(V,"/signup"),e)},B=function(e,t,n,i,a){return L.a.post("".concat(V,"/saveprescription"),{date:e,patientName:t,prescriberEmail:n,prescriptionList:i,validity:a})},J=function(e){return L.a.post("".concat(V,"/verifyprescription"),{id:e})},M=function(){var e=Object(s.f)(),t=Object(i.useState)(new Date),n=Object(d.a)(t,1)[0],a=Object(i.useState)(""),c=Object(d.a)(a,2),r=c[0],o=c[1],b=Object(i.useState)([]),p=Object(d.a)(b,2),u=p[0],O=p[1],m=Object(i.useState)(""),x=Object(d.a)(m,2),h=x[0],g=x[1],f=Object(i.useState)(""),v=Object(d.a)(f,2),y=v[0],P=v[1],N=Object(i.useState)(""),C=Object(d.a)(N,2),E=C[0],D=C[1],J=Object(i.useState)(""),M=Object(d.a)(J,2),A=M[0],I=M[1],F=Object(i.useState)(""),q=Object(d.a)(F,2),U=q[0],G=q[1],R=Object(i.useState)(!1),Y=Object(d.a)(R,2),z=Y[0],H=Y[1],K=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=h,n=E,L.a.post("".concat(V,"/getotp"),{email:t,password:n})).then((function(e){200===e.status?(alert("OTP sent to registered email"),P(e.data.prescriberName)):alert("Some error occurred")})).catch((function(e){console.log(e.response.status)}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=h,n=U,L.a.post("".concat(V,"/verifyotp"),{email:t,otp:n})).then((function(e){200===e.status&&(H(!0),alert("OTP Verified!"))})).catch((function(e){409===e.response.status&&alert("Invalid OTP, try again")}));case 2:case"end":return e.stop()}var t,n}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var t=Object(l.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(n,r,h,u,A).then((function(t){console.log(t),e.push("/print",{patientName:r,prescriptionList:u,prescriberName:y,date:n.toString(),id:t.data.id})})).catch((function(e){console.log(e.response)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(S,{date:n,patientName:r,setPatientName:o,validity:A,setValidity:I}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(T,{prescriptionList:u,setPrescriptionList:O}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(k,{prescriberEmail:h,setPrescriberEmail:g,prescriberPassword:E,setPrescriberPassword:D,OTP:U,setOTP:G,getOTP:K,checkOTP:Q,OTPVerified:z,printPrescription:W})]})},A={marginTop:"15px",width:"250px"},I={marginTop:"15px"},F=function(){var e=Object(i.useState)({name:"",email:"",password:""}),t=Object(d.a)(e,2),n=t[0],a=t[1],c=function(e){a(Object(u.a)(Object(u.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))},r=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,D(n).then((function(e){200===e.status&&alert("Account created, navigate to /prescription")})).catch((function(e){return console.log(e.response)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(m.a,{container:!0,children:[Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",style:{margin:"20px 0px"},children:Object(w.jsx)("p",{children:"Sign Up"})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(x.a,{variant:"filled",name:"name",label:"Name",style:A,value:n.name,onChange:c})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(x.a,{variant:"filled",name:"email",label:"Email",style:A,value:n.email,onChange:c})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(x.a,{variant:"filled",name:"password",value:n.password,label:"Password",type:"password",style:A,onChange:c})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(h.a,{variant:"contained",style:I,onClick:r,children:"Sign Up"})})]})},q=n(89),U=n.n(q),G=(n(153),function(){var e=Object(s.f)();return Object(i.useEffect)((function(){U.a.toCanvas(document.getElementById("qrcode"),"http://192.168.0.180:3000/verify/".concat(e.location.state.id),(function(e){e&&console.log(e)}))}),[e.location.state.id]),Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsxs)(m.a,{item:!0,xs:12,md:6,align:"left",style:{paddingLeft:"10%",paddingTop:"50px"},children:["Date: ",e.location.state.date,Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),"Patient Name: ",e.location.state.patientName,Object(w.jsx)("br",{}),"Prescriber Name: ",e.location.state.prescriberName]}),Object(w.jsx)(m.a,{item:!0,xs:12,md:6,align:"right",style:{paddingRight:"5%",paddingTop:"50px"},children:Object(w.jsx)("canvas",{id:"qrcode"})}),Object(w.jsx)(m.a,{item:!0,xs:12}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",children:Object(w.jsx)(T,{prescriptionList:e.location.state.prescriptionList,print:!0})}),Object(w.jsx)(m.a,{item:!0,xs:12,align:"center",className:"printBtn",children:Object(w.jsx)(h.a,{variant:"contained",onClick:function(){return window.print()},children:"Print"})})]})}),R=function(){var e="valid",t=Object(i.useState)("checking"),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)([]),o=Object(d.a)(r,2),b=o[0],p=o[1],u=Object(i.useState)(""),O=Object(d.a)(u,2),x=O[0],h=O[1],g=Object(s.g)().id;return Object(i.useEffect)((function(){var t=function(){var t=Object(l.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(g).then((function(t){200===t.status&&(p(t.data.prescriptionList),c(e),h(t.data.validity))})).catch((function(e){console.log(e.response)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[g]),Object(w.jsxs)(m.a,{container:!0,spacing:2,children:[Object(w.jsxs)(m.a,{item:!0,xs:12,align:"center",style:{marginTop:"20px"},children:["invalid"===a&&Object(w.jsx)("h3",{children:"Invalid prescription"}),a===e&&Object(w.jsx)("h3",{children:"Prescription Verified"})]}),Object(w.jsxs)(m.a,{item:!0,xs:12,align:"center",children:["Valid upto: ",x]}),a===e&&Object(w.jsx)(T,{prescriptionList:b,print:!0})]})},Y=(n(154),function(){return Object(w.jsx)(r.a,{children:Object(w.jsxs)(s.c,{children:[Object(w.jsx)(s.a,{path:"/prescriber",children:Object(w.jsx)(F,{})}),Object(w.jsx)(s.a,{path:"/prescription",children:Object(w.jsx)(M,{})}),Object(w.jsx)(s.a,{path:"/print",children:Object(w.jsx)(G,{})}),Object(w.jsx)(s.a,{path:"/verify/:id",children:Object(w.jsx)(R,{})}),Object(w.jsxs)(s.a,{path:"/",children:[Object(w.jsx)("h3",{children:"Navigate to /prescriber to create an account"}),Object(w.jsx)("h3",{children:"Navigate to /prescription to create prescription"})]})]})})});c.a.render(Object(w.jsx)(Y,{}),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.84bc6b60.chunk.js.map